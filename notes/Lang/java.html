<!--?xml version="1.0" encoding="iso-8859-1"?--><!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html  xmlns="http://www.w3.org/1999/xhtml">  <head>    <meta http-equiv="content-type" content="text/html; charset=UTF-8" />    <title>lang</title>    <meta name="generator" content="Amaya, see http://www.w3.org/Amaya/" />  </head>  <body><span style="font-weight: bold;"></span><br />    <ol id="mozToc">      <!--mozToc h1 1 h2 2 h3 3 h4 4 h5 5 h6 6-->      <li><a href="#mozTocId667751">Examples</a>        <ol>          <li><a href="#mozTocId693041">Is there a connection leak?</a></li>          <li><a href="#mozTocId634251">Why extra chairs (&amp; tables)</a></li>          <li><a href="#mozTocId971789">But my dog doesn't bark</a></li>          <li><a href="#mozTocId439179">What could go wrong with this</a></li>          <li><a href="#mozTocId409495">Why does the replace doesn't work</a></li>          <li><a href="#mozTocId720771">What would be the output?</a></li>          <li><a href="#mozTocId29713">Infinite loop?</a></li>        </ol>      </li>      <li><a href="#mozTocId116587">Learnings</a>        <ol>          <li><a href="#mozTocId412660">Design principles, structuring</a></li>          <li><a href="#mozTocId997163">Defensive programming</a></li>          <li><a href="#mozTocId791227">Language nuances</a></li>          <li><a href="#mozTocId287515">Tools</a></li>        </ol>      </li>    </ol>    <br />    <h1><a class="mozTocH1" id="mozTocId667751"></a>Examples <br />    </h1>    <h2><a class="mozTocH2" id="mozTocId693041"></a>Is there a connection leak?</h2>    public class FileCopy {<br />        static void copy(String src, String dest) throws IOException {<br />            InputStream in = null;<br />            OutputStream out = null;<br />            try {<br />                in = new FileInputStream(src);<br />                out = new FileOutputStream(dest);<br />                byte[] buf = new byte[1024];<br />                while ((int n = in.read(buf)) &gt;= 0) {<br />                    out.write(buf, 0, n);<br />                }<br />            }  finally {<br />                if (in != null)  {<br />                    in.close();<br />                }<br />                if (out != null) {<br />                    out.close();<br />                }<br />            }<br />        }<br />    }   <br />    <h2><a class="mozTocH2" id="mozTocId634251"></a>Why extra chairs (&amp;      tables)</h2>    class Furniture {<br />        private static int count;<br />        public static void increment() {<br />            count++;<br />        }<br />        public static int getCount() {<br />            return count;<br />        }<br />    }<br />    class Chairs extends Furniture {<br />        public Chairs() { <br />            increment();<br />        }<br />    }<br />    class Tables extends Furniture {<br />        public Tables() {<br />            increment();<br />        }<br />    }<br />    <br />    public class Foo {<br />        public static void main(String[] args) {<br />            Chairs[] chairs = { new Chairs(), new Chairs() };<br />            Tables[] tables = { new Tables(), new Tables() };<br />    <br />            System.out.println(chairs.getCount() + " chairs.");<br />            System.out.println(tables.getCount() + " tables.");<br />        }<br />    }<br />    <br />    <span style="font-weight: bold;">Will making it non-static work?</span><br />    <br />    <h2><a class="mozTocH2" id="mozTocId971789"></a><span style="font-weight: bold;"></span>But
      my dog doesn't bark</h2>    public class Foo {<br />        public static void main(String args[]) {<br />            Dog badDog = new Dog();<br />            Dog myGoodDog = new SilentDog();<br />            badDog.bark();<br />            myGoodDog.bark();<br />        }<br />    }<br />    <br />    class Dog {<br />        public static void bark() {<br />            System.out.print("bark");<br />        }<br />    }<br />    <br />    class SilentDog extends Dog {<br />        public static void bark() {<br />    }<br />    <span style="font-weight: bold;"></span><br />    <h2><a class="mozTocH2" id="mozTocId439179"></a>What could go wrong with      this</h2>    static private final String LOCK = "LOCK";<br />    void someMethod() {<br />      synchronized(LOCK) {<br />        ...<br />    }<br />    <h2><a class="mozTocH2" id="mozTocId409495"></a>Why does the replace doesn't      work</h2>    <span style="font-weight: bold;"></span>String val = "foo";<br />    val.replace('o', 'f');<br />    if(val.equals("fff")) <span style="font-weight: bold;"></span><br />    <br />    <h2><a class="mozTocH2" id="mozTocId720771"></a>What would be the output?</h2>    public class Foo {<br />        public static synchronized void main(String[] a) {<br />            Thread t = new Thread() {<br />                public void run() {<br />                    down();<br />                }<br />            };<br />            t.run();<br />            System.out.print("UP");<br />        }<br />    <br />        static synchronized void down() {<br />            System.out.print("DOWN");<br />        }<br />    }<span style="font-weight: bold;"></span><br />    <br />    <h2><a class="mozTocH2" id="mozTocId29713"></a>Infinite loop?</h2>    public class Loop2 {<br />        public static final int s_begin = Integer.MAX_VALUE - 50;<br />        public static void main(String[] args) {<br />            int count = 0;<br />            for (int i = s_begin; i &lt;= Integer.MAX_VALUE; i++) {<br />                count++;<br />            }<br />            System.out.println(count);<br />        }<br />    }<span style="font-weight: bold;"></span><br />    <h1><a class="mozTocH1" id="mozTocId116587"></a>Learnings<br />    </h1>    <h2><a class="mozTocH2" id="mozTocId412660"></a>Design principles,      structuring<span style="font-weight: bold;"></span></h2>    <span style="font-weight: bold;"></span>    <ul>      <li>Clarity, simplicity</li>      <li>Keep it small</li>      <li>Reuse, don't duplicate<br />      </li>      <li>Encapsulation (testability, reuse, independent development)</li>      <li>Minimize change impact, code reuse, extensibility<br />      </li>      <ul>        <li>Single responsibility (e.g. number of if/else)<br />        </li>        <li>Open/Close</li>        <li>Liskov's substitution</li>        <li>Interface segregation<br />        </li>        <li>Dependency inversion<span style="font-weight: bold;"></span></li>      </ul>    </ul>    <h2><a class="mozTocH2" id="mozTocId997163"></a>Defensive programming<span style="font-weight: bold;"></span></h2>    <ul>      <li>Use long vs int</li>      <li>Validate arguments</li>      <li>Return empty objects instead of null</li>      <li>Copy input objects</li>      <li>Use immutable objects </li>    </ul>    <p></p>    <h2><a class="mozTocH2" id="mozTocId791227"></a>Language nuances</h2>    <ul>      <li>Use final</li>      <li>Use StringBuilder</li>      <li>Use PreparedStatements</li>      <li>Prefer foreach</li>      <li>Prefer primitives (avoid nulls, extra memory, use of "==" operators)</li>      <li>Declare variables just before use</li>      <li>Don't do String s = new String ("blah")</li>      <li>Make sure to use BigDecimal for float, double</li>      <li>Equals and hashcode</li>      <li>Use Static factory patterns, instead of numerous constructors (name,        no new object etc)</li>      <li>Don't use finalizers</li>      <li>Use enums (singleton, type safety, ordering change has no impact)<br />      </li>    </ul>    <p></p>    <p></p>    <h2><a class="mozTocH2" id="mozTocId287515"></a>Tools<br />    </h2>    <ul>      <li>Junit</li>      <li>FindBug</li>      <li>Eclipse MAT analyzer</li>      <li>Thread dump analyzer</li>    </ul>  </body></html>